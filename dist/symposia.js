(function(e,t){typeof module=="object"&&module.exports?module.exports=function(e){return e=e||require("underscore"),t(e)}:typeof define=="function"&&define.amd?define("postal",["underscore"],function(n){return t(n,e)}):e.postal=t(e._,e)})(this,function(e,t,n){var r,i=function(){var t;return function(n){var r=!1;return e.isString(n)?(r=n===t,t=n):(r=e.isEqual(n,t),t=e.clone(n)),!r}},s=function(){var t=[];return function(n){var r=!e.any(t,function(t){return e.isObject(n)||e.isArray(n)?e.isEqual(n,t):n===t});return r&&t.push(n),r}},o=function(e){this.channel=e||r.configuration.DEFAULT_CHANNEL};o.prototype.subscribe=function(){return arguments.length===1?new u(this.channel,arguments[0].topic,arguments[0].callback):new u(this.channel,arguments[0],arguments[1])},o.prototype.publish=function(){var e=arguments.length===1?Object.prototype.toString.call(arguments[0])==="[object String]"?{topic:arguments[0]}:arguments[0]:{topic:arguments[0],data:arguments[1]};return e.channel=this.channel,r.configuration.bus.publish(e)};var u=function(e,t,n){this.channel=e,this.topic=t,this.callback=n,this.constraints=[],this.context=null,r.configuration.bus.publish({channel:r.configuration.SYSTEM_CHANNEL,topic:"subscription.created",data:{event:"subscription.created",channel:e,topic:t}}),r.configuration.bus.subscribe(this)};u.prototype={unsubscribe:function(){this.inactive||(this.inactive=!0,r.configuration.bus.unsubscribe(this),r.configuration.bus.publish({channel:r.configuration.SYSTEM_CHANNEL,topic:"subscription.removed",data:{event:"subscription.removed",channel:this.channel,topic:this.topic}}))},defer:function(){var e=this,t=this.callback;return this.callback=function(n,r){setTimeout(function(){t.call(e.context,n,r)},0)},this},disposeAfter:function(t){if(e.isNaN(t)||t<=0)throw"The value provided to disposeAfter (maxCalls) must be a number greater than zero.";var n=this,r=this.callback,i=e.after(t,e.bind(function(){this.unsubscribe()},this));return this.callback=function(){r.apply(n.context,arguments),i()},this},distinctUntilChanged:function(){return this.withConstraint(new i),this},distinct:function(){return this.withConstraint(new s),this},once:function(){return this.disposeAfter(1),this},withConstraint:function(t){if(!e.isFunction(t))throw"Predicate constraint must be a function";return this.constraints.push(t),this},withConstraints:function(t){var n=this;return e.isArray(t)&&e.each(t,function(e){n.withConstraint(e)}),n},withContext:function(e){return this.context=e,this},withDebounce:function(t,n){if(e.isNaN(t))throw"Milliseconds must be a number";var r=this.callback;return this.callback=e.debounce(r,t,!!n),this},withDelay:function(t){if(e.isNaN(t))throw"Milliseconds must be a number";var n=this,r=this.callback;return this.callback=function(e,i){setTimeout(function(){r.call(n.context,e,i)},t)},this},withThrottle:function(t){if(e.isNaN(t))throw"Milliseconds must be a number";var n=this.callback;return this.callback=e.throttle(n,t),this},subscribe:function(e){return this.callback=e,this}};var a={cache:{},regex:{},compare:function(t,n){var r,i,s,o=this.cache[n]&&this.cache[n][t];return typeof o!="undefined"?o:((i=this.regex[t])||(r="^"+e.map(t.split("."),function(e){var t="";return!s||(t=s!=="#"?"\\.\\b":"\\b"),e==="#"?t+="[\\s\\S]*":e==="*"?t+="[^.]+":t+=e,s=e,t}).join("")+"$",i=this.regex[t]=new RegExp(r)),this.cache[n]=this.cache[n]||{},this.cache[n][t]=o=i.test(n),o)},reset:function(){this.cache={},this.regex={}}},f=function(t,n){!t.inactive&&r.configuration.resolver.compare(t.topic,n.topic)&&e.all(t.constraints,function(e){return e.call(t.context,n.data,n)})&&typeof t.callback=="function"&&t.callback.call(t.context,n.data,n)},l=0,c=[],h=function(){while(c.length)p.unsubscribe(c.shift())},p={addWireTap:function(e){var t=this;return t.wireTaps.push(e),function(){var n=t.wireTaps.indexOf(e);n!==-1&&t.wireTaps.splice(n,1)}},publish:function(t){return++l,t.timeStamp=new Date,e.each(this.wireTaps,function(e){e(t.data,t)}),this.subscriptions[t.channel]&&e.each(this.subscriptions[t.channel],function(e){var n=0,r=e.length,i;while(n<r)(i=e[n++])&&f(i,t)}),--l===0&&h(),t},reset:function(){this.subscriptions&&(e.each(this.subscriptions,function(t){e.each(t,function(e){while(e.length)e.pop().unsubscribe()})}),this.subscriptions={})},subscribe:function(e){var t=this.subscriptions[e.channel],n;return t||(t=this.subscriptions[e.channel]={}),n=this.subscriptions[e.channel][e.topic],n||(n=this.subscriptions[e.channel][e.topic]=[]),n.push(e),e},subscriptions:{},wireTaps:[],unsubscribe:function(e){if(l){c.push(e);return}if(this.subscriptions[e.channel][e.topic]){var t=this.subscriptions[e.channel][e.topic].length,n=0;while(n<t){if(this.subscriptions[e.channel][e.topic][n]===e){this.subscriptions[e.channel][e.topic].splice(n,1);break}n+=1}}}};r={configuration:{bus:p,resolver:a,DEFAULT_CHANNEL:"/",SYSTEM_CHANNEL:"postal"},ChannelDefinition:o,SubscriptionDefinition:u,channel:function(e){return new o(e)},subscribe:function(e){return new u(e.channel||r.configuration.DEFAULT_CHANNEL,e.topic,e.callback)},publish:function(e){return e.channel=e.channel||r.configuration.DEFAULT_CHANNEL,r.configuration.bus.publish(e)},addWireTap:function(e){return this.configuration.bus.addWireTap(e)},linkChannels:function(t,n){var i=[];return t=e.isArray(t)?t:[t],n=e.isArray(n)?n:[n],e.each(t,function(t){var s=t.topic||"#";e.each(n,function(n){var o=n.channel||r.configuration.DEFAULT_CHANNEL;i.push(r.subscribe({channel:t.channel||r.configuration.DEFAULT_CHANNEL,topic:s,callback:function(t,i){var s=e.clone(i);s.topic=e.isFunction(n.topic)?n.topic(i.topic):n.topic||i.topic,s.channel=o,s.data=t,r.publish(s)}}))})}),i},utils:{getSubscribersFor:function(){var e=arguments[0],t=arguments[1];return arguments.length===1&&(e=arguments[0].channel||r.configuration.DEFAULT_CHANNEL,t=arguments[0].topic),r.configuration.bus.subscriptions[e]&&Object.prototype.hasOwnProperty.call(r.configuration.bus.subscriptions[e],t)?r.configuration.bus.subscriptions[e][t]:[]},reset:function(){r.configuration.bus.reset(),r.configuration.resolver.reset()}}},p.subscriptions[r.configuration.SYSTEM_CHANNEL]={};if(t&&Object.prototype.hasOwnProperty.call(t,"__postalReady__")&&e.isArray(t.__postalReady__))while(t.__postalReady__.length)t.__postalReady__.shift().onReady(r);return r}),function(e){function t(e,t,n,r,i){this._listener=t,this._isOnce=n,this.context=r,this._signal=e,this._priority=i||0}function n(e,t){if(typeof e!="function")throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function r(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){r.prototype.dispatch.apply(e,arguments)}}t.prototype={active:!0,params:null,execute:function(e){var t;return this.active&&this._listener&&(e=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,e),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},r.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(e,n,r,i){var s=this._indexOfListener(e,r);if(s!==-1){if(e=this._bindings[s],e.isOnce()!==n)throw Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else e=new t(this,e,n,r,i),this._addBinding(e);return this.memorize&&this._prevParams&&e.execute(this._prevParams),e},_addBinding:function(e){var t=this._bindings.length;do--t;while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var n=this._bindings.length,r;n--;)if(r=this._bindings[n],r._listener===e&&r.context===t)return n;return-1},has:function(e,t){return this._indexOfListener(e,t)!==-1},add:function(e,t,r){return n(e,"add"),this._registerListener(e,!1,t,r)},addOnce:function(e,t,r){return n(e,"addOnce"),this._registerListener(e,!0,t,r)},remove:function(e,t){n(e,"remove");var r=this._indexOfListener(e,t);return r!==-1&&(this._bindings[r]._destroy(),this._bindings.splice(r,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t=Array.prototype.slice.call(arguments),n=this._bindings.length,r;this.memorize&&(this._prevParams=t);if(n){r=this._bindings.slice(),this._shouldPropagate=!0;do n--;while(r[n]&&this._shouldPropagate&&r[n].execute(t)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var i=r;i.Signal=r,typeof define=="function"&&define.amd?define("signals",[],function(){return i}):typeof module!="undefined"&&module.exports?module.exports=i:e.signals=i}(this),function(){var e=function(e){function t(e,t){if(e.indexOf)return e.indexOf(t);var n=e.length;while(n--)if(e[n]===t)return n;return-1}function n(e,n){var r=t(e,n);r!==-1&&e.splice(r,1)}function r(e,t){return"[object "+t+"]"===Object.prototype.toString.call(e)}function i(e){return r(e,"RegExp")}function s(e){return r(e,"Array")}function o(e){return typeof e=="function"}function u(e){var t;return e===null||e==="null"?t=null:e==="true"?t=!0:e==="false"?t=!1:e===d||e==="undefined"?t=d:e===""||isNaN(e)?t=e:t=parseFloat(e),t}function a(e){var t=e.length,n=[];while(t--)n[t]=u(e[t]);return n}function f(e,t){var n=(e||"").replace("?","").split("&"),r=n.length,i={},s,o;while(r--)s=n[r].split("="),o=t?u(s[1]):s[1],i[s[0]]=typeof o=="string"?decodeURIComponent(o):o;return i}function l(){this.bypassed=new e.Signal,this.routed=new e.Signal,this._routes=[],this._prevRoutes=[],this._piped=[],this.resetState()}function c(t,n,r,s){var o=i(t),u=s.patternLexer;this._router=s,this._pattern=t,this._paramsIds=o?null:u.getParamIds(t),this._optionalParamsIds=o?null:u.getOptionalParamsIds(t),this._matchRegexp=o?t:u.compilePattern(t,s.ignoreCase),this.matched=new e.Signal,this.switched=new e.Signal,n&&this.matched.add(n),this._priority=r||0}var h,p,d;return p=/t(.+)?/.exec("t")[1]==="",l.prototype={greedy:!1,greedyEnabled:!0,ignoreCase:!0,ignoreState:!1,shouldTypecast:!1,normalizeFn:null,resetState:function(){this._prevRoutes.length=0,this._prevMatchedRequest=null,this._prevBypassedRequest=null},create:function(){return new l},addRoute:function(e,t,n){var r=new c(e,t,n,this);return this._sortedInsert(r),r},removeRoute:function(e){n(this._routes,e),e._destroy()},removeAllRoutes:function(){var e=this.getNumRoutes();while(e--)this._routes[e]._destroy();this._routes.length=0},parse:function(e,t){e=e||"",t=t||[];if(!this.ignoreState&&(e===this._prevMatchedRequest||e===this._prevBypassedRequest))return;var n=this._getMatchedRoutes(e),r=0,i=n.length,s;if(i){this._prevMatchedRequest=e,this._notifyPrevRoutes(n,e),this._prevRoutes=n;while(r<i)s=n[r],s.route.matched.dispatch.apply(s.route.matched,t.concat(s.params)),s.isFirst=!r,this.routed.dispatch.apply(this.routed,t.concat([e,s])),r+=1}else this._prevBypassedRequest=e,this.bypassed.dispatch.apply(this.bypassed,t.concat([e]));this._pipeParse(e,t)},_notifyPrevRoutes:function(e,t){var n=0,r;while(r=this._prevRoutes[n++])r.route.switched&&this._didSwitch(r.route,e)&&r.route.switched.dispatch(t)},_didSwitch:function(e,t){var n,r=0;while(n=t[r++])if(n.route===e)return!1;return!0},_pipeParse:function(e,t){var n=0,r;while(r=this._piped[n++])r.parse(e,t)},getNumRoutes:function(){return this._routes.length},_sortedInsert:function(e){var t=this._routes,n=t.length;do--n;while(t[n]&&e._priority<=t[n]._priority);t.splice(n+1,0,e)},_getMatchedRoutes:function(e){var t=[],n=this._routes,r=n.length,i;while(i=n[--r]){(!t.length||this.greedy||i.greedy)&&i.match(e)&&t.push({route:i,params:i._getParamsArray(e)});if(!this.greedyEnabled&&t.length)break}return t},pipe:function(e){this._piped.push(e)},unpipe:function(e){n(this._piped,e)},toString:function(){return"[crossroads numRoutes:"+this.getNumRoutes()+"]"}},h=new l,h.VERSION="0.12.0",h.NORM_AS_ARRAY=function(e,t){return[t.vals_]},h.NORM_AS_OBJECT=function(e,t){return[t]},c.prototype={greedy:!1,rules:void 0,match:function(e){return e=e||"",this._matchRegexp.test(e)&&this._validateParams(e)},_validateParams:function(e){var t=this.rules,n=this._getParamsObject(e),r;for(r in t)if(r!=="normalize_"&&t.hasOwnProperty(r)&&!this._isValidParam(e,r,n))return!1;return!0},_isValidParam:function(e,n,r){var u=this.rules[n],a=r[n],f=!1,l=n.indexOf("?")===0;return a==null&&this._optionalParamsIds&&t(this._optionalParamsIds,n)!==-1?f=!0:i(u)?(l&&(a=r[n+"_"]),f=u.test(a)):s(u)?(l&&(a=r[n+"_"]),f=this._isValidArrayRule(u,a)):o(u)&&(f=u(a,e,r)),f},_isValidArrayRule:function(e,n){if(!this._router.ignoreCase)return t(e,n)!==-1;typeof n=="string"&&(n=n.toLowerCase());var r=e.length,i,s;while(r--){i=e[r],s=typeof i=="string"?i.toLowerCase():i;if(s===n)return!0}return!1},_getParamsObject:function(e){var n=this._router.shouldTypecast,r=this._router.patternLexer.getParamValues(e,this._matchRegexp,n),i={},s=r.length,o,a;while(s--)a=r[s],this._paramsIds&&(o=this._paramsIds[s],o.indexOf("?")===0&&a&&(i[o+"_"]=a,a=f(a,n),r[s]=a),p&&a===""&&t(this._optionalParamsIds,o)!==-1&&(a=void 0,r[s]=a),i[o]=a),i[s]=a;return i.request_=n?u(e):e,i.vals_=r,i},_getParamsArray:function(e){var t=this.rules?this.rules.normalize_:null,n;return t=t||this._router.normalizeFn,t&&o(t)?n=t(e,this._getParamsObject(e)):n=this._getParamsObject(e).vals_,n},interpolate:function(e){var t=this._router.patternLexer.interpolate(this._pattern,e);if(!this._validateParams(t))throw new Error("Generated string doesn't validate against `Route.rules`.");return t},dispose:function(){this._router.removeRoute(this)},_destroy:function(){this.matched.dispose(),this.switched.dispose(),this.matched=this.switched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}},l.prototype.patternLexer=function(){function e(){var e,t;for(e in p)p.hasOwnProperty(e)&&(t=p[e],t.id="__CR_"+e+"__",t.save="save"in t?t.save.replace("{{id}}",t.id):t.id,t.rRestore=new RegExp(t.id,"g"))}function t(e,t){var n=[],r;e.lastIndex=0;while(r=e.exec(t))n.push(r[1]);return n}function n(e){return t(h,e)}function r(e){return t(p.OP.rgx,e)}function i(e,t){return e=e||"",e&&(g===d?e=e.replace(l,""):g===m&&(e=e.replace(c,"")),e=s(e,"rgx","save"),e=e.replace(f,"\\$&"),e=s(e,"rRestore","res"),g===d&&(e="\\/?"+e)),g!==v&&(e+="\\/?"),new RegExp("^"+e+"$",t?"i":"")}function s(e,t,n){var r,i;for(i in p)p.hasOwnProperty(i)&&(r=p[i],e=e.replace(r[t],r[n]));return e}function o(e,t,n){var r=t.exec(e);return r&&(r.shift(),n&&(r=a(r))),r}function u(e,t){if(typeof e!="string")throw new Error("Route pattern should be a string.");var n=function(e,n){var r;n=n.substr(0,1)==="?"?n.substr(1):n;if(t[n]!=null){if(typeof t[n]=="object"){var i=[];for(var s in t[n])i.push(encodeURI(s+"="+t[n][s]));r="?"+i.join("&")}else r=String(t[n]);if(e.indexOf("*")===-1&&r.indexOf("/")!==-1)throw new Error('Invalid value "'+r+'" for segment "'+e+'".')}else{if(e.indexOf("{")!==-1)throw new Error("The segment "+e+" is required.");r=""}return r};return p.OS.trail||(p.OS.trail=new RegExp("(?:"+p.OS.id+")+$")),e.replace(p.OS.rgx,p.OS.save).replace(h,n).replace(p.OS.trail,"").replace(p.OS.rRestore,"/")}var f=/[\\.+*?\^$\[\](){}\/'#]/g,l=/^\/|\/$/g,c=/\/$/g,h=/(?:\{|:)([^}:]+)(?:\}|:)/g,p={OS:{rgx:/([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,save:"$1{{id}}$2",res:"\\/?"},RS:{rgx:/([:}])\/?(\{)/g,save:"$1{{id}}$2",res:"\\/"},RQ:{rgx:/\{\?([^}]+)\}/g,res:"\\?([^#]+)"},OQ:{rgx:/:\?([^:]+):/g,res:"(?:\\?([^#]*))?"},OR:{rgx:/:([^:]+)\*:/g,res:"(.*)?"},RR:{rgx:/\{([^}]+)\*\}/g,res:"(.+)"},RP:{rgx:/\{([^}]+)\}/g,res:"([^\\/?]+)"},OP:{rgx:/:([^:]+):/g,res:"([^\\/?]+)?/?"}},d=1,v=2,m=3,g=d;return e(),{strict:function(){g=v},loose:function(){g=d},legacy:function(){g=m},getParamIds:n,getOptionalParamsIds:r,getParamValues:o,compilePattern:i,interpolate:u}}(),h};typeof define=="function"&&define.amd?define("crossroads",["signals"],e):typeof module!="undefined"&&module.exports?module.exports=e(require("signals")):window.crossroads=e(window.signals)}(),function(){var e=function(e){var t=function(t){function w(e){return String(e||"").replace(/[\\.+*?\^$\[\](){}\/'#]/g,"\\$&")}function E(e){if(!e)return"";var t=new RegExp("^"+w(o.prependHash)+"|"+w(o.appendHash)+"$","g");return e.replace(t,"")}function S(){var e=h.exec(o.getURL());return e&&e[1]?decodeURIComponent(e[1]):""}function x(){return l?l.contentWindow.frameHash:null}function T(){l=r.createElement("iframe"),l.src="about:blank",l.style.display="none",r.body.appendChild(l)}function N(){if(l&&u!==x()){var e=l.contentWindow.document;e.open(),e.write("<html><head><title>"+r.title+'</title><script type="text/javascript">var frameHash="'+u+'";</script></head><body>&nbsp;</body></html>'),e.close()}}function C(e,t){if(u!==e){var n=u;u=e,g&&(t?l.contentWindow.frameHash=e:N()),o.changed.dispatch(E(e),E(n))}}function k(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function L(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}function A(e){e=Array.prototype.slice.call(arguments);var t=e.join(o.separator);return t=t?o.prependHash+t.replace(d,"")+o.appendHash:t,t}function O(e){return e=encodeURI(e),v&&y&&(e=e.replace(/\?/,"%3F")),e}var n=25,r=t.document,i=t.history,s=e.Signal,o,u,a,f,l,c,h=/#(.*)$/,p=/(\?.*)|(\#.*)/,d=/^\#/,v=!1,m="onhashchange"in t&&r.documentMode!==7,g=v&&!m,y=location.protocol==="file:";return g?c=function(){var e=S(),t=x();t!==u&&t!==e?o.setHash(E(t)):e!==u&&C(e)}:c=function(){var e=S();e!==u&&C(e)},o={VERSION:"1.1.4",appendHash:"",prependHash:"/",separator:"/",changed:new s,stopped:new s,initialized:new s,init:function(){if(f)return;u=S(),m?k(t,"hashchange",c):(g&&(l||T(),N()),a=setInterval(c,n)),f=!0,o.initialized.dispatch(E(u))},stop:function(){if(!f)return;m?L(t,"hashchange",c):(clearInterval(a),a=null),f=!1,o.stopped.dispatch(E(u))},isActive:function(){return f},getURL:function(){return t.location.href},getBaseURL:function(){return o.getURL().replace(p,"")},setHash:function(e){e=A.apply(null,arguments),e!==u&&(C(e),e===u&&(t.location.hash="#"+O(e)))},replaceHash:function(e){e=A.apply(null,arguments),e!==u&&(C(e,!0),e===u&&t.location.replace("#"+O(e)))},getHash:function(){return E(u)},getHashAsArray:function(){return o.getHash().split(o.separator)},dispose:function(){o.stop(),o.initialized.dispose(),o.stopped.dispose(),o.changed.dispose(),l=o=t.hasher=null},toString:function(){return'[hasher version="'+o.VERSION+'" hash="'+o.getHash()+'"]'}},o.initialized.memorize=!0,o}(window);return t};typeof define=="function"&&define.amd?define("hasher",["signals"],e):typeof exports=="object"?module.exports=e(require("signals")):window.hasher=e(window.signals)}(),function(){var e={require:{shim:{hasher:["signals"],crossroads:["signals","hasher"],postal:["underscore"]},paths:{postal:"vendor/postaljs/lib/postal",signals:"node_modules/signals/dist/signals",hasher:"node_modules/hasher/dist/js/hasher",crossroads:"node_modules/crossroads/dist/crossroads"}}};window.jQuery?define("jquery",[],function(){return window.jQuery}):(e.require.paths.jquery="vendor/jquery/jquery",e.require.shim.jquery={exports:"$"}),window._?define("underscore",[],function(){return window._}):(e.require.paths.underscore="vendor/lodash/lodash",e.require.shim.underscore={exports:"_"}),require.config(e.require),define("src/base",["postal","crossroads","hasher"],function(e,t,n){return{bus:e,router:t,hash:n}})}(),define("src/core",["src/base"],function(e){var t={_modules:{},_sandboxes:{},_subscriptions:[]};t.log=function(e,t){window.console||(window.console={}),window.console[e]||(window.console[e]=function(){}),window.console[e](t)};if(!_.has(e,"bus"))throw new Error("Base object must contain a message bus");return _.extend(t,e)}),define("src/sandbox",["require","src/core","jquery"],function(e){var t=e("src/core"),n=e("jquery");return t.sandbox={create:function(e){var r=_.uniqueId("sandbox-"),i=e,s=n("#"+i),o=[];return{$:function(e){return e?s.find(e):s},publish:function(e){t.bus.publish(e)},subscribe:function(e){try{if(!_.has(e,"topic")&&!_.has(e,"callback"))throw new Error("Missing topic or callback for "+i);o.push(t.bus.subscribe(e))}catch(n){t.log("info",n.message)}},unsubscribeAll:function(){var e=0;while(o.length)o.shift().unsubscribe(),e++;return e},unsubscribe:function(e){var t=_.pluck(o,"topic"),n=t.indexOf(e);return n!==-1&&_(o.splice(n,1)).invoke("unsubscribe"),o},getSubscriptions:function(){return o},getElement:function(e){return this.$(e)},getId:function(){return r},getModuleName:function(){return i}}}},t.sandbox}),define("src/module",["require","src/core"],function(e){var t=e("src/core");return t.modules={get:function(e){return t._modules[e]},create:function(e){var n,r;try{return _.each(e,function(e,n){var r;if(_.has(t._modules,n))return;r=e.creator(t.sandbox.create(n)),r=null,t._modules[n]={_id:_.uniqueId("module-"),name:n,creator:e.creator}},this),this}catch(i){t.log("error",i.message)}},start:function(){var e=[].slice.call(arguments);try{_.each(e,function(e,n){var r=_.isString(e)?this.get(e):e,i=t.sandbox.create(e.name);r.sandbox=i,r.instance=r.creator(i),r.instance.destroy=r.instance.destroy||function(){},r.instance.init(),t.log("info","["+r.name+"] started")},this)}catch(n){t.log("info",n.message)}},stop:function(){var e=[].slice.call(arguments);if(!e.length)return;return _.each(e,function(e){e.instance.destroy(),e.instance=null,e.sandbox.unsubscribeAll(),delete e.instance,delete e.sandbox}),e.length},startAll:function(){this.start.apply(this,this.getStopped())},stopAll:function(){this.stop.apply(this,this.getStarted())},getStarted:function(){return _.filter(t._modules,function(e){return _.has(e,"instance")})},getStopped:function(){return _.filter(t._modules,function(e){return!_.has(e,"instance")})},isStarted:function(e){if(this.isModule(e))return _.isObject(t._modules[e].instance)},isModule:function(e){return!_.isUndefined(t._modules[e])},reset:function(){this.stopAll(),t._modules={}}},t.modules}),define("symposia",["src/base","src/core","src/sandbox","src/module"],function(e,t){var n=_.extend(e,t);return window.debug&&(window.symposia=n),n});